---
title: 计算几何做题记录
math: true
date: 2023-07-24 22:41:54
categories: [算法竞赛]
tags: [计算几何, 题单/题解]
summary: 一些做过的计算几何题。
cover:
---

### 2023 杭电多校 2 1006

[Fencing the cows](https://acm.hdu.edu.cn/showproblem.php?pid=7292)

**题目大意**

给定两组点$A, B$，求在 $A$ 中至少选择 $k$ 个点围成的凸包 $T$ 使得 $\forall b_i \subseteq T, b_i \in B$

**题解**

对于任意两两点组成的线段 $s$，可以通过 $B$ 中的所有点是否在 $s$ 的 $CCW$ 方向来判断线段 $s$ 是否合法，可以 $O(n^2)$ 找出所有这样的线段。

处理所有的线段，可以利用 $dp$ 或者 $Floyd$ 找最小环来求出答案。

参考代码：

```cpp
#include<bits/stdc++.h>
using namespace std;
using ll = long long;
typedef pair<int, int> PII;
const int INF = 1e9 + 7, MAXN = 2e5 + 10, mod = 998244353;
struct Point {
    ll x, y;
    Point() {};
    Point(int x, int y) : x(x), y(y) {}
};
ll crs(Point a, Point b) {
    return a.x * b.y - a.y * b.x;
}
typedef vector<Point> Points;

void solve() {
    int n, m;
    cin >> n >> m;
    Points ps1(n);
    Points ps2(m);
    for(auto &[x, y] : ps1) {
        cin >> x >> y;
    }
    for(auto &[x, y] : ps2) {
        cin >> x >> y;
    }
    auto check = [&](Point a, Point b) {
        bool ok = true;
        for(Point p : ps2) {
            Point x = Point(b.x - a.x, b.y - a.y);
            Point y = Point(p.x - a.x, p.y - a.y);            
            if(!(ok =  crs(x, y) > 0)) {
                break;
            }
        }
        return ok;
    };
    struct Edge {
        int from, to;
    };
    vector<vector<int>> dis(n, vector<int> (n, INF));
    for(int i = 0; i < n; i ++) {
        for(int j = 0; j < n; j ++) {
            if(i != j && check(ps1[i], ps1[j])) {
                dis[i][j] = min(dis[i][j], 1);
            }
        }
    }
    for(int i = 0; i < n; i ++) {
        dis[i][i] = INF;
    }
    for(int k = 0; k < n; k ++) {
        for(int i = 0; i < n; i ++) {
            for(int j = 0; j < n; j ++) {
                dis[i][j] = min(dis[i][j], dis[i][k] + dis[k][j]);
            }
        }
    }
    int res = INF;
    for(int i = 0; i < n; i ++) {
        for(int j = i; j < n; j ++) {
            res = min(res, dis[i][j] + dis[j][i]);
        }
    }
    if(res >= INF) {
        res = -1;
    }
    cout << res << '\n';
}
int main() {
    ios::sync_with_stdio(false);
    cin.tie(0);
    int _ = 1;
    cin >> _;
    while(_ --) {
        solve();
    }
}
```